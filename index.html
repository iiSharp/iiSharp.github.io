<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iiSharp</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: system-ui, sans-serif;
        }

        body {
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: #121212;
            color: #fff;
        }

        nav {
            padding: 1rem 2rem;
            background: #1a1a1a;
            border-bottom: 1px solid #333;
        }

        .nick {
            font-weight: bold;
            font-size: 1.2rem;
            text-decoration: none;
            color: #fff;
        }

        .container {
            display: flex;
            flex: 1;
            min-height: 0;
        }

        .sidebar {
            width: 300px;
            border-right: 1px solid #333;
            display: flex;
            flex-direction: column;
            background: #1a1a1a;
        }

        .search {
            padding: 1rem;
            border-bottom: 1px solid #333;
        }

        #searchInput {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #444;
            background: #2a2a2a;
            color: #fff;
        }

        .tree {
            flex: 1;
            overflow-y: auto;
            padding: 0.5rem;
        }

        .movie-item {
            padding: 0.75rem;
            cursor: pointer;
            border-bottom: 1px solid #333;
            color: #fff;
        }

        .movie-item:hover {
            background: #2a2a2a;
        }

        .movie-item.active {
            background: #404040;
        }

        .main {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            background: #000;
        }

        video {
            width: 100%;
            height: 100%;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: 40vh;
                border-right: none;
                border-bottom: 1px solid #333;
            }
            
            .main {
                height: 60vh;
                padding: 1rem;
            }
            
            nav {
                padding: 0.75rem 1rem;
            }
        }
    </style>
</head>
<body>
    <nav>
        <a href="#" class="nick">iiSharp</a>
    </nav>

    <div class="container">
        <aside class="sidebar">
            <div class="search">
                <input type="text" id="searchInput" placeholder="Search videos...">
            </div>
            <div class="tree" id="movieTree"></div>
        </aside>

        <main class="main">
            <video id="player" controls>
                Select a video from the list
            </video>
        </main>
    </div>

    <script>
        const movies = [
            { title: "Metla", url: "https://iiSharp.github.io/app/assets/videos/метла.mp4" },
            { title: "Crossbow", url: "https://iiSharp.github.io/app/assets/videos/Crossbow.mp4" },
            { title: "Centodiciotto", url: "https://iiSharp.github.io/app/assets/videos/Centodiciotto.mp4" },
            { title: "Povar", url: "https://iiSharp.github.io/app/assets/videos/повар2.mp4" },
            { title: "NiebieskieAuto", url: "https://iiSharp.github.io/app/assets/videos/NiebieskieAuto.mp4" },
            { title: "Ancient Stoneworks", url: "https://iiSharp.github.io/app/assets/videos/Ancient Stoneworks.mp4" },
            { title: "Balance", url: "https://iiSharp.github.io/app/assets/videos/balance.mp4" },
            { title: "BuildWithATwist", url: "https://iiSharp.github.io/app/assets/videos/buildwithatwist.mp4" },
            { title: "clouds", url: "https://iiSharp.github.io/app/assets/videos/clouds.mp4" },
            { title: "GrapeVines", url: "https://iiSharp.github.io/app/assets/videos/grapevines.mp4" },
            { title: "Guitar", url: "https://iiSharp.github.io/app/assets/videos/guitar.mp4" },
            { title: "Iglo", url: "https://iiSharp.github.io/app/assets/videos/iglo.mp4" },
            { title: "lozko", url: "https://iiSharp.github.io/app/assets/videos/lozko.mp4" },
            { title: "MinecartWithTNT", url: "https://iiSharp.github.io/app/assets/videos/minecartwithtnt.mp4" },
            { title: "outlines", url: "https://iiSharp.github.io/app/assets/videos/outlines.mp4" },
            { title: "Palma", url: "https://iiSharp.github.io/app/assets/videos/palma.mp4" },
            { title: "Pasticcino", url: "https://iiSharp.github.io/app/assets/videos/Pasticcino.mp4" },
            { title: "Plyta", url: "https://iiSharp.github.io/app/assets/videos/plyta.mp4" },
            { title: "Rookt", url: "https://iiSharp.github.io/app/assets/videos/rookt.mp4" },
            { title: "Ruiny", url: "https://iiSharp.github.io/app/assets/videos/ruiny.mp4" },
            { title: "TargetLocked", url: "https://iiSharp.github.io/app/assets/videos/targetlocked.mp4" },
            { title: "TheDefender", url: "https://iiSharp.github.io/app/assets/videos/thedefender.mp4" },
            { title: "UwagaGorka", url: "https://iiSharp.github.io/app/assets/videos/uwagagorka.mp4" }
        ].sort((a, b) => a.title.localeCompare(b.title));

        const player = document.getElementById('player');
        const movieTree = document.getElementById('movieTree');
        const searchInput = document.getElementById('searchInput');

        function loadMovie(movie) {
            document.querySelectorAll('.movie-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const movieElement = document.querySelector(`.movie-item[data-id="${movie.title}"]`);
            if (movieElement) {
                movieElement.classList.add('active');
                movieElement.scrollIntoView({ block: 'nearest' });
            }
            
            player.src = movie.url;
            player.load();
            
            history.replaceState(null, null, `#${encodeURIComponent(movie.title)}`);
        }

        function renderMovies(filter = '') {
            movieTree.innerHTML = '';
            
            const filtered = movies.filter(movie => 
                movie.title.toLowerCase().includes(filter.toLowerCase())
            );
            
            filtered.forEach((movie, index) => {
                const div = document.createElement('div');
                div.className = 'movie-item';
                div.textContent = movie.title;
                div.dataset.id = movie.title;
                
                div.addEventListener('click', () => {
                    loadMovie(movie);
                });
                
                if (index === 0 && filter === '' && !window.location.hash) {
                    div.classList.add('active');
                    player.src = movie.url;
                }
                
                movieTree.appendChild(div);
            });

            const hash = window.location.hash.substring(1);
            if (hash) {
                const movieFromHash = movies.find(m => 
                    decodeURIComponent(hash) === m.title
                );
                if (movieFromHash) {
                    setTimeout(() => loadMovie(movieFromHash), 100);
                }
            }
        }

        searchInput.addEventListener('input', (e) => {
            renderMovies(e.target.value);
        });

        window.addEventListener('hashchange', () => {
            const hash = window.location.hash.substring(1);
            if (hash) {
                const movieFromHash = movies.find(m => 
                    decodeURIComponent(hash) === m.title
                );
                if (movieFromHash) {
                    loadMovie(movieFromHash);
                }
            }
        });

        renderMovies();

        function handleResize() {
            const isMobile = window.innerWidth <= 768;
            document.querySelector('.container').style.flexDirection = isMobile ? 'column' : 'row';
        }

        window.addEventListener('resize', handleResize);
    </script>
</body>
</html>
